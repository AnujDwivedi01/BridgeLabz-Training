CREATE TABLE specialties (
    specialty_id INT PRIMARY KEY,
    specialty_name VARCHAR(50)
);

INSERT INTO specialties VALUES
(1, 'Cardiology'),
(2, 'Orthopedics'),
(3, 'General Medicine');


CREATE TABLE doctor_profiles (
    doctor_id INT AUTO_INCREMENT PRIMARY KEY,
    doctor_name VARCHAR(50),
    specialization VARCHAR(50),
    contact VARCHAR(15),
    consultation_fee INT,
    specialty_id INT,
    is_active BOOLEAN DEFAULT TRUE,
    FOREIGN KEY (specialty_id) REFERENCES specialties(specialty_id)
);


INSERT INTO doctor_profiles
(doctor_name, specialization, contact, consultation_fee, specialty_id)
VALUES ('Dr. Anil Kumar', 'Heart Specialist', '9876541111', 500, 1);

SELECT * FROM specialties;
+--------------+------------------+
| specialty_id | specialty_name   |
+--------------+------------------+
|            1 | Cardiology       |
|            2 | Orthopedics      |
|            3 | General Medicine |
+--------------+------------------+


START TRANSACTION;

UPDATE doctor_profiles
SET specialty_id = 2
WHERE doctor_id = 1;

COMMIT;


SELECT
    d.doctor_name,
    d.specialization,
    s.specialty_name,
    d.consultation_fee
FROM doctor_profiles d
JOIN specialties s
ON d.specialty_id = s.specialty_id
WHERE s.specialty_name = 'Cardiology'
AND d.is_active = TRUE;


CREATE TABLE appointments (
    appointment_id INT PRIMARY KEY,
    doctor_id INT,
    appointment_date DATE
);

SELECT *
FROM appointments
WHERE doctor_id = 1
AND appointment_date > CURDATE();

UPDATE doctor_profiles
SET is_active = FALSE
WHERE doctor_id = 1
AND doctor_id NOT IN (
    SELECT doctor_id
    FROM appointments
    WHERE appointment_date > CURDATE()
);

